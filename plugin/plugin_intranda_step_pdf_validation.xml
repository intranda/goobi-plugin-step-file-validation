<config_plugin>
	<!-- order of configuration is: 1.) project name and step name matches 2.) 
		step name matches and project is * 3.) project name matches and step name 
		is * 4.) project name and step name are * -->

	<config>
		<!-- which projects to use for (can be more then one, otherwise use *) -->
		<project>*</project>
		<step>*</step>
		<!--folder>Folder with PDF</folder -->
		<fileFilter>.*\.pdf</fileFilter>
		<profileName>testprofile</profileName>
		<targetLevel>0</targetLevel>
	</config>

	<global>
		<profile name="testprofile">
			<level>
				<check name="checkVersion" group="test" tool="jhove"
					code="The Version of the PDF-File is not supported"
					xpathSelector="//jhove:repInfo/jhove:version"
					regEx="^1\.[012456]$|^2\.0$" />

				<check name="featureReportCreated" group="test"
					dependsOn="checkVersion" tool="verapdf"
					code="The Value of this node is not 1"
					xpathSelector="//report/batchSummary/featureReports" regEx="0" />

				<check name="featureReportCreated2"
					dependsOn="featureReportCreated" tool="verapdf"
					code="The node featureReports3 does not exist"
					xpathSelector="//report/batchSummary/featureReports3" />

			</level>
			<level>
				<check name="checkEncryption" tool="jhove"
					code="validation_failed"
					xpathSelector="//jhove:repInfo/jhove:properties/jhove:property[name='Encryption']" />
			</level>
			<level>
				<check name="isValid" tool="jhove" code="validation_failed"
					xpathSelector="//jhove:repInfo/jhove:status"
					regex="Well-Formed and valid" />
				<check name="pdf-a validation" tool="verapdf"
					code="pdfa_validation_failed" xpathSelector="xpathSelector"
					regEx="regEx" />
			</level>

		</profile>
		<namespaces>
			<namespace name="jhove"
				uri="http://schema.openpreservation.org/ois/xml/ns/jhove" />
		</namespaces>
		<tools>
			<tool name="jhove"
				cmd="/opt/digiverso/tools/jhove/jhove -h XML -m PDF-hul -o {pv.outputFile} {pv.inputFile}"
				stdout="false" xmlNamespace="jhove" />
			<tool name="verapdf"
				cmd="/home/michael/verapdf/verapdf --format mrr {pv.inputFile}"
				stdout="true" />
			<tool name="pdfinfoXml" cmd="/opt/digiverso/tools/"
				stdout="true" />

		</tools>
	</global>
</config_plugin>
