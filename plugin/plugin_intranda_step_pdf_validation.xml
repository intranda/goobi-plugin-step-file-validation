<config_plugin>
	<!-- order of configuration is: 1.) project name and step name matches 2.) 
		step name matches and project is * 3.) project name matches and step name 
		is * 4.) project name and step name are * -->

	<config>
		<!-- which projects to use for (can be more then one, otherwise use *) -->
		<project>*</project>
		<step>*</step>
		<folder>Folder with PDF</folder>
		<fileFilter>\.pdf$</fileFilter>
		<profile>testprofile</profile>
		<success>2</success>
		<stepOnError>Upload</stepOnError>
	</config>
	
	<global>
	<profile name="testprofile" >
			<level>
				<check name="hasfeaturereport"
					tool="verapdf" 
					code="isPdfa" 
					xpathSelector="//report/batchSummary/featureReports"
					regEx="1" 
				/>
			</level>
			<level>
				<check name="jhove validation"
					tool="jhove" 
					code="validation_failed" 
					xpathSelector="//jhove:repInfo/jhove:status"
					regEx="Well-Formed and valid" 
				/>
			</level>
			<level>
				<check name="pdf-a validation"
					tool="verapdf" 
					code="pdfa_validation_failed" 
					xpathSelector="xpathSelector"
					regEx="regEx" 
				/>
			</level>
		</profile>
		<tools>
			<tool name="verapdf" 
				cmd="/home/michael/verapdf/verapdf --format mrr {pv.inputFile}"
				stdout="true"
			 />
			<tool name="jhove"
				 cmd="/opt/digiverso/pdf/jhove/jhove -h MRR -m PDF-hul -o {pv.outputpath} {pv.filename}" 
				 stdout="false" />
			<!-- for tools that need the path of the outputfile {pv.outputFilename} -->
		</tools>
		<namespaces>
			<namespace name="jhove" uri="http://schema.openpreservation.org/ois/xml/ns/jhove" />
		</namespaces>
	</global>
</config_plugin>
